<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§ Ø§Ù„Ø³ÙŠØ§Ø³ÙŠØ©</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --primary:#1e88e5;
      --gradient: linear-gradient(135deg,#1e88e5,#00c6ff);
      --bg:#f2f7fb;
    }
    body{margin:0;background:var(--bg);font-family:'Cairo',sans-serif}
    .shell{
      min-height:100dvh;display:grid;place-items:center;
      padding:18px;background:radial-gradient(1200px 600px at 100% -10%,#e3f2fd,transparent),radial-gradient(900px 400px at -10% 100%,#e0f7fa,transparent);
    }
    .card{
      width:min(960px,92vw);background:#fff;border-radius:28px;padding:22px 22px 28px;
      box-shadow:0 12px 40px rgba(0,0,0,.12);position:relative;overflow:hidden
    }
    .header{
      display:flex;align-items:center;gap:12px;justify-content:space-between;margin-bottom:8px
    }
    .title{
      font-weight:900;font-size:24px;background:var(--gradient);-webkit-background-clip:text;background-clip:text;color:transparent
    }
    .badge{
      padding:6px 10px;border-radius:999px;background:#eef7ff;font-weight:700;font-size:13px;color:#2563eb
    }
    hr{border:none;height:1px;background:#eef1f6;margin:12px 0 18px}

    .step{display:none;animation:fade .4s ease}
    .step.active{display:block}
    @keyframes fade{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

    label{font-weight:700;display:block;margin:10px 0 6px}
    input[type="text"]{
      width:100%;padding:12px 14px;border:1px solid #e3e8ef;border-radius:14px;outline:none;font-size:16px
    }
    .privacy{margin-top:10px;display:flex;gap:8px;align-items:flex-start;font-size:14px}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      background:var(--gradient);color:#fff;font-weight:900;border:none;padding:12px 18px;border-radius:14px;
      cursor:pointer;transition:.25s;margin-top:14px
    }
    .btn:hover{transform:translateY(-1px);filter:saturate(1.1)}
    .muted{color:#6b7280;font-size:14px}

    .question{background:#f8fbff;border:1px solid #e6eef8;border-radius:16px;padding:12px 14px;margin:12px 0}
    .question .q{font-weight:800;margin-bottom:8px}
    .opt{display:block;margin:6px 0}
    .opt input{margin-left:6px}

    .result{
      display:none;text-align:center;background:#ecfdf5;border:1px solid #bbf7d0;border-radius:18px;padding:18px;margin-top:16px;
      font-weight:900;font-size:18px
    }

    .leaderboard{
      display:none;margin-top:20px;background:#f7f7ff;border:1px solid #e6e6ff;padding:14px;border-radius:18px
    }
    .leaderboard h3{margin:0 0 10px;text-align:center}
    .board{list-style:none;padding:0;margin:0;display:grid;gap:8px}
    .board li{
      background:#fff;border:1px solid #eef2ff;border-radius:12px;padding:10px 12px;display:flex;justify-content:space-between;align-items:center
    }
    .me{outline:2px solid #60a5fa;box-shadow:0 0 0 4px #e0f2fe}

    .foot{margin-top:10px;text-align:center;color:#64748b;font-size:12px}
  </style>
</head>
<body>
  <div class="shell">
    <div class="card">
      <div class="header">
        <div class="title">Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠØ§ Ø§Ù„Ø³ÙŠØ§Ø³ÙŠØ©</div>
        <div class="badge">Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·</div>
      </div>
      <hr/>

      <!-- Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ + Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ© -->
      <div class="step active" id="step-1">
        <label>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</label>
        <input type="text" id="studentName" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ ÙƒØ§Ù…Ù„" />
        <div class="privacy">
          <input type="checkbox" id="agree">
          <label for="agree" class="muted">Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ <a href="#" target="_blank">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a> ÙˆØ£Ù‚Ø±Ù‘ Ø¨Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·.</label>
        </div>
        <button class="btn" id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</button>
        <div class="muted" style="margin-top:6px">* ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡ Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø³Ø±Ø¹.</div>
      </div>

      <!-- Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
      <div class="step" id="step-2">
        <form id="examForm"></form>
        <button class="btn" id="submitBtn">ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
        <div id="resultBox" class="result"></div>

        <div id="leaderboard" class="leaderboard">
          <h3>Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚ÙŠÙ†</h3>
          <ol id="board" class="board"></ol>
        </div>
      </div>

      <div class="foot">Â© Ø§Ù…ØªØ­Ø§Ù† ØªØ¬Ø±ÙŠØ¨ÙŠ â€“ Ø§Ù„Ù†ØªÙŠØ¬Ø© ØªØ¸Ù‡Ø± ÙÙˆØ±Ù‹Ø§ Ù…Ø¹ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø«Ù… Ø§Ù„Ø£Ø³Ø±Ø¹</div>
    </div>
  </div>

  <!-- ğŸŠ confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <script>
    // â†â† Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆÙŠØ¨ Ø¢Ø¨ Ù‡Ù†Ø§ (Ù…Ù† Ù†Ø´Ø± Google Apps Script)
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbyannDXNYc9v5yfK4N3cYtd6gkBilQOFHo0S4utYt6A9ni2byfVZ8KcDzFRe6CguEztHQ/exec';

    // Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© (Ø­Ø³Ø¨ Ù…Ø§ Ø£Ø±Ø³Ù„Øª)
    const questions = [
      "Ø§ÙƒØ¨Ø± Ø§Ù„Ù‚Ø§Ø±Ø§Øª Ù…ÙˆØ±ÙÙˆÙ„ÙˆØ¬ÙŠØ§ ÙˆØ¯ÙŠÙ…ÙˆØºØ±Ø§ÙÙŠØ§ ØªÙ‚Ø¹ ÙÙ‰ Ø§Ù„Ù†ØµÙ .... Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¹Ø§Ù„Ù… .",
      "Ø§Ù‰ Ù…Ù† Ø§Ù„Ù‚Ø§Ø±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ø®Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø¨ÙŠØ³Ø© ....",
      "ØªØ¹ØªØ¨Ø± Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† Ù…Ù† Ø§Ù„Ø¯ÙˆÙ„ ....",
      "Ø§Ù‰ Ù…Ù† Ø§Ù„Ù‚Ø§Ø±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© ØªÙ…Ø± Ø¨Ù‡Ø§ Ø«Ù„Ø§Ø« Ø¯ÙˆØ§Ø¦Ø± Ø¹Ø±Ø¶ Ø±Ø¦ÙŠØ³ÙŠØ© ....",
      "ØªÙ‚Ø¹ Ø§Ø³ØªØ±Ø§Ù„ÙŠØ§ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ© ÙÙ‰ Ø§Ù„Ø¬Ù‡Ø©....",
      "Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø­Ø¨ÙŠØ³Ø© Ø§Ù„ØªÙ‰ ØªØªÙ…ØªØ¹ Ø¨Ø£ÙƒØ¨Ø± Ù…Ø³Ø§Ø­Ø© ÙÙ‰ Ø§Ù„Ø¹Ø§Ù„Ù… ØªÙ‚Ø¹ ÙÙ‰ Ø§Ù„Ù†ØµÙ ....",
      "Ø§Ù‰ Ù…Ù† Ø§Ù„Ù‚Ø§Ø±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© ØªØ¹ØªØ¨Ø± Ø§Ù„Ø§Ø¹Ù„Ù‰ ÙÙ‰ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© ....",
      "Ø§Ø°Ø§ Ù…Ø± Ù†Ù‡Ø± Ø¹Ø¨Ø± Ø¹Ø¯Ø© Ø¯ÙˆÙ„ Ù†Ø§Ù…ÙŠØ© ØŒ ÙÙ…Ø§ Ø§Ù„Ø£Ø«Ø± Ø§Ù„Ø¬ØºØ±Ø§ÙÙ‰ Ø£Ùˆ Ø§Ù„Ø³ÙŠØ§Ø³Ù‰ Ø§Ù„Ù…Ø­ØªÙ…Ù„ Ù„Ø°Ù„Ùƒ ØŸ ....",
      "Ø¥Ø°Ø§ ØªÙ… ØºÙ„Ù‚ Ù…Ø¶ÙŠÙ‚ Ø§Ù„Ø¨ÙŠØ³ÙÙˆØ± ÙØ£Ù† Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„ØªÙ‰ Ø³ØªØªØ£Ø«Ø± Ù‡Ù‰ Ø§Ù„ØªÙ‰ ØªØ·Ù„ Ø¹Ù„Ù‰ ....",
      "Ù‚Ù†Ø§Ù‡ Ø¨Ù†Ù…Ø§ ØªÙ…Ø«Ù„ Ù…ÙˆÙ‚Ø¹Ø§ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§ Ù„Ø£Ù†Ù‡Ø§ : ....",
      "Ø§Ù‰ Ù…Ù† Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„ØªØ§Ù„ÙŠØ© Ù„ÙŠØ³Øª Ø¯ÙˆÙ„Ø© Ø¨Ø­Ø±ÙŠØ© ØŸ....",
      "Ø£Ù‰ Ù…Ù† Ø§Ù„Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠÙ‡ ÙŠÙ…Ø«Ù„Ù‡Ø§ Ø¹Ø§Ù… 1651Ù… ....",
      "Ø§ØªØ¨Ø¹ Ø§Ù„Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø³ÙˆÙÙŠØªÙŠ Ø§Ù„Ø£ÙŠØ¯ÙˆÙ„ÙˆØ¬ÙŠØ© Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒÙŠØ© ÙˆØ¯ÙˆÙ„ ....",
      "Ù…Ù† Ø£Ù‡Ù… Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… ÙˆÙŠÙˆØ¬Ø¯ ÙÙŠ Ø¬Ù†ÙˆØ¨ Ø§Ù„ÙˆØ·Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠ....",
      "Ù†Ù‡Ø± Ø§Ù„ÙÙˆÙ„Ø¬Ø§ Ù…Ù† Ø§Ù„Ø£Ù†Ù‡Ø§Ø± Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ø§Ù„ØªÙ‰ Ù„Ø§ ØªØªØ£Ø«Ø± Ø¨Ù‡Ø§ Ù…Ø´ÙƒÙ„Ø§Øª Ø­ÙˆÙ„ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù…ÙŠØ§Ù‡ ÙˆÙ‡Ùˆ Ù…Ø§ ÙŠØªØ´Ø§Ø¨Ù‡ Ù…Ø¹ Ù†Ù‡Ø± ....",
      "Ø§Ù„Ø¹Ø§Ù…Ù„ Ø§Ù„Ù…Ø¤Ø«Ø± ÙÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø¨Ø´Ø±ÙŠØ© Ù„Ù„Ø³ÙƒØ§Ù† Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¯ÙˆÙ„Ø© Ù‡Ùˆ ....",
      "ØªØ¹Ø¯ Ù…Ù† Ø£ÙƒØ¨Ø± Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø¨ÙŠØ³Ø© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… ÙˆØªÙ‚Ø¹ ÙÙŠ Ø§Ù„Ø±Ø¨Ø¹ Ø§Ù„Ø´Ù…Ø§Ù„Ù‰ Ø§Ù„Ø´Ø±Ù‚Ù‰ ....",
      "Ø£Ø­Ø¯ Ø§Ù„Ù…Ø¶Ø§ÙŠÙ‚ Ø§Ù„Ø¢ØªÙŠØ© ÙŠØ®Ø±Ø¬ Ø¹Ù† Ù†Ø·Ø§Ù‚ Ù‚Ø§Ø±Ø© Ø¥ÙØ±ÙŠÙ‚ÙŠØ§....",
      "Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø¹Ø¸Ù…Ù‰ Ø§Ù„Ø§Ù† ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… ØªÙ†ØªÙ…Ù‰ Ù„Ù„Ø¹Ø§Ù„Ù…....",
      "Ø§Ù„Ù†Ù‡Ø± Ø§Ù„Ø°Ù‰ Ù„Ù… ØªØªØºÙŠØ± Ø¬Ù†Ø³ÙŠØ§Øª Ø§Ù„Ø³ÙƒØ§Ù† Ø¹Ù„Ù‰ Ø¬Ø§Ù†Ø¨Ù‰ Ù…Ø¬Ø±Ø§Ù‡ Ù‡Ùˆ ....",
      "Ø§Ù‰ Ù…Ù† Ø§Ù„Ù…Ø³Ø·Ø­Ø§Øª Ø§Ù„Ù…Ø§Ø¦ÙŠØ© Ø§Ù„Ø¢ØªÙŠØ© ÙŠØ¹Ø¯ Ù†Ù‚Ø·Ø© Ø§Ù„ØªÙ‚Ø§Ø¡ Ø®Ø· Ø·ÙˆÙ„ ØµÙØ± Ù…Ø¹ Ø¯Ø§Ø¦Ø±Ø© Ø¹Ø±Ø¶ ØµÙØ± ....",
      "Ø§Ù‰ Ù…Ù† Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø¢ØªÙŠØ© ØªØ­Ø¯ Ù„ÙŠØ¨ÙŠØ§ Ù…Ù† Ø§Ù„Ø¬Ù‡Ø© Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ© Ø§Ù„ØºØ±Ø¨ÙŠØ© ....",
      "Ø±ØºÙ… Ø£Ù† Ø§Ù„ØµÙŠÙ† Ù‡Ù‰ Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© Ø§Ù„Ø«Ø§Ø¨ØªØ© ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù… Ø¨Ø¹Ø¯ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø© Ø¥Ù„Ø§ Ø£Ù†Ù‡Ø§ Ù„Ø§ ØªØ²Ø§Ù„ ØªØµÙ†Ù Ù…Ù† Ø¶Ù…Ù† Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù…....",
      "Ø§Ù‰ Ù…Ù† Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø¢ØªÙŠØ© ØªØªÙˆÙ‚Ø¹ Ø£Ù† ØªØ²ÙŠØ¯ Ø¨Ù‡Ø§ ØŒ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø¨Ø´Ø±Ù‰ Ù„Ù„Ø³ÙƒØ§Ù† ....",
      "ÙŠØ¨Ù„Øº Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¹Ø§Ù„Ù…Ù‰ Ù„Ù…Ø³Ø§Ù‡Ù…Ø© Ø§Ù„Ù…ØµØ§ÙŠØ¯ Ø§Ù„Ø¨Ø­Ø±ÙŠØ© ÙÙ‰ Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù‰ Ø¯ÙˆÙ„Ø© Ø­ÙˆØ§Ù„Ù‰ 1.5Ùª Ù…Ù† Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ù…Ø­Ù„Ù‰ ØŒ ÙÙ‰ Ø¶ÙˆØ¡ Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø§Ù‰ Ù…Ù† Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø¢ØªÙŠØ© ØªØªÙˆÙ‚Ø¹ Ø£Ù† ØªØ´Ø§Ø±Ùƒ Ø¨Ù†Ø³Ø¨Ø© ÙƒØ¨ÙŠØ±Ø© Ù…Ù† Ø§Ù„Ù…ØµØ§ÙŠØ¯ Ø§Ù„Ø¨Ø­Ø±ÙŠØ© ...."
    ];

    const options = [
      ["Ø§Ù„Ø¬Ù†ÙˆØ¨ Ø§Ù„Ø´Ø±Ù‚Ù‰","Ø§Ù„Ø´Ù…Ø§Ù„ Ø§Ù„Ø´Ø±Ù‚Ù‰","Ø¬Ù†ÙˆØ¨ ØºØ±Ø¨Ù‰","Ø´Ù…Ø§Ù„ ØºØ±Ø¨Ù‰"],
      ["Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠØ©","Ø£ÙˆØ±ÙˆØ¨Ø§","Ø£ÙØ±ÙŠÙ‚ÙŠØ§","Ø£Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©"],
      ["Ø§Ù„Ø¨Ø­Ø±ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©","Ø§Ù„Ø¨Ø­Ø±ÙŠØ© Ø§Ù„Ù†Ø§Ù…ÙŠØ©","Ø­Ø¨ÙŠØ³Ø© Ù…ØªÙ‚Ø¯Ù…Ø©","Ø­Ø¨ÙŠØ³Ø© Ù†Ø§Ù…ÙŠØ©"],
      ["Ø§Ø³ØªØ±Ø§Ù„ÙŠØ§","Ø§Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø¬Ù†ÙˆØ¨ÙŠÙ‡","Ø§Ø³ÙŠØ§","Ø§ÙØ±ÙŠÙ‚ÙŠØ§"],
      ["Ø¬Ù†ÙˆØ¨ Ø´Ø±Ù‚Ù‡Ø§","Ø¬Ù†ÙˆØ¨ ØºØ±Ø¨Ù‡Ø§","Ø´Ù…Ø§Ù„ Ø´Ø±Ù‚Ù‡Ø§","Ø´Ù…Ø§Ù„ ØºØ±Ø¨Ù‡Ø§"],
      ["Ø¬Ù†ÙˆØ¨ Ø´Ø±Ù‚","Ø¬Ù†ÙˆØ¨ ØºØ±Ø¨","Ø´Ù…Ø§Ù„ ØºØ±Ø¨","Ø´Ù…Ø§Ù„ Ø´Ø±Ù‚"],
      ["Ø§ÙˆØ±ÙˆØ¨Ø§","Ø§Ù…Ø±ÙŠÙƒØ§ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠÙ‡","Ø§Ø³ÙŠØ§","Ø§Ø³ØªØ±Ø§Ù„ÙŠØ§"],
      ["ØªÙ‚ÙˆÙŠØ© Ø§Ù„ØªØ¹Ø§ÙˆÙ† Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯Ù‰","Ù†Ø´ÙˆØ¡ Ø®Ù„Ø§ÙØ§Øª Ø­ÙˆÙ„ ØªÙ‚Ø§Ø³Ù… Ø§Ù„Ù…ÙŠØ§Ù‡","Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙƒØ«Ø§ÙØ© Ø§Ù„Ø³ÙƒØ§Ù†ÙŠØ© Ø¹Ù„Ù‰ Ø¶ÙØ§ÙÙ‡","Ø­Ø¯ÙˆØ« ÙÙŠØ¶Ø§Ù†Ø§Øª Ù…ÙˆØ³Ù…ÙŠØ© Ù…Ø¯Ù…Ø±Ø©"],
      ["Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø§Ø­Ù…Ø±","Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ù…ØªÙˆØ³Ø·","Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø³ÙˆØ¯","Ø®Ù„ÙŠØ¬ Ø§Ù„Ø¹Ø±Ø¨Ù‰"],
      ["ØªØµÙ„ Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù‡Ø§Ø¯Ø¦ Ø¨Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ø£Ø·Ù„Ø³ÙŠ","ØªØµÙ„ Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ù…ØªÙˆØ³Ø· Ø¨Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±","ØªØµÙ„ Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø³ÙˆØ¯ Ø¨Ø¨Ø­Ø± Ù…Ø±Ù…Ø±Ø©","ØªØµÙ„ Ø§Ù„Ø®Ù„ÙŠØ¬ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø¨Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù‡Ù†Ø¯ÙŠ"],
      ["Ù…ØµØ±","ØªØ±ÙƒÙŠØ§","Ø¨ÙˆÙ„ÙŠÙÙŠØ§","Ø§Ù„Ù‡Ù†Ø¯"],
      ["Ø§Ù„Ù†ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ù…Ù† Ø§Ù„Ù‚Ø±Ù† 16","Ø§Ù„Ù†ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ù…Ù† Ø§Ù„Ù‚Ø±Ù† 17","Ø§Ù„Ù†ØµÙ Ø§Ù„Ø£Ø®ÙŠØ± Ù…Ù† Ø§Ù„Ù‚Ø±Ù† 17","Ø§Ù„Ù†ØµÙ Ø§Ù„Ø§ÙˆÙ„ Ù…Ù† Ø§Ù„Ù‚Ø±Ù† 16"],
      ["Ø´Ø±Ù‚ Ø£ÙˆØ±ÙˆØ¨Ø§","Ø´Ø±Ù‚ Ø¢Ø³ÙŠØ§","ØºØ±Ø¨ Ø£ÙˆØ±ÙˆØ¨Ø§","ØºØ±Ø¨ Ø¢Ø³ÙŠØ§"],
      ["Ù…Ø¶ÙŠÙ‚ Ù‡Ø±Ù…Ø²","Ù…Ø¶ÙŠÙ‚ Ø¬Ø¨Ù„ Ø·Ø§Ø±Ù‚","Ù‚Ù†Ø§Ù‡ Ø§Ù„Ø³ÙˆÙŠØ³","Ù…Ø¶ÙŠÙ‚ Ø¨Ø§Ø¨ Ø§Ù„Ù…Ù†Ø¯Ø¨"],
      ["Ø§Ù„Ø¯Ø§Ù†ÙˆØ¨","Ø§Ù„Ù†ÙŠÙ„","Ø§Ù„Ø¨Ùˆ","Ø§Ù„Ø±Ø§ÙŠÙ†"],
      ["Ø®Ø·ÙˆØ· Ø§Ù„Ø·ÙˆÙ„","Ø¹Ù„Ø§Ù‚Ø§ØªÙ‡Ø§ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©","Ø³Ù„Ø·ØªÙ‡Ø§ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ©","Ø¯ÙˆØ§Ø¦Ø± Ø§Ù„Ø¹Ø±Ø¶"],
      ["Ù…Ù†ØºÙˆÙ„ÙŠØ§","Ø¥ÙŠØ±Ø§Ù†","ÙƒØ§Ø²Ø§Ø®Ø³ØªØ§Ù†","Ø£ÙØºØ§Ù†Ø³ØªØ§Ù†"],
      ["Ù…Ø¶ÙŠÙ‚ Ù…ÙˆØ²Ù…Ø¨ÙŠÙ‚","Ù…Ø¶ÙŠÙ‚ Ø¬Ø¨Ù„ Ø·Ø§Ø±Ù‚","Ù…Ø¶ÙŠÙ‚ Ù…Ù„Ù‚Ø§","Ù…Ø¶ÙŠÙ‚ Ø¨Ø§Ø¨ Ø§Ù„Ù…Ù†Ø¯Ø¨"],
      ["Ø§Ù„Ù†Ø§Ù…Ù‰ Ø§Ù„Ù‚Ø¯ÙŠÙ…","Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ø§Ù„Ù‚Ø¯ÙŠÙ…","Ø§Ù„Ù†Ø§Ù…Ù‰ Ø§Ù„Ø­Ø¯ÙŠØ«","Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ø§Ù„Ø­Ø¯ÙŠØ«"],
      ["Ø§Ù„Ø±Ø§ÙŠÙ†","Ø§Ù„Ø¯Ø§Ù†ÙˆØ¨","Ø§Ù„Ø³ÙŠÙ†","Ø§Ù„Ø§Ù…Ø§Ø²ÙˆÙ†"],
      ["Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù‡Ù†Ø¯ÙŠ","Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ø£Ø·Ù„Ù†Ø·ÙŠ","Ø§Ù„Ù…Ø­ÙŠØ· Ø§Ù„Ù‡Ø§Ø¯Ù‰","Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ù…ØªÙˆØ³Ø·"],
      ["Ø§Ù„Ø³ÙˆØ¯Ø§Ù†","Ù…Ø¯ØºØ´Ù‚Ø±","Ø§Ù„Ù…ØºØ±Ø¨","Ø§Ù„Ù†ÙŠØ¬Ø±"],
      ["Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø§Ù„Ù†Ø§Ù…Ù‰","Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…","Ø§Ù„Ø­Ø¯ÙŠØ« Ø§Ù„Ù†Ø§Ù…Ù‰","Ø§Ù„Ø­Ø¯ÙŠØ« Ø§Ù„Ù…ØªÙ‚Ø¯Ù…"],
      ["ØµÙØ±- 3 Ø´Ù…Ø§Ù„Ø§","6- 9 Ø¬Ù†ÙˆØ¨Ø§","23.5- 45 Ø´Ù…Ø§Ù„Ø§","66.5- 90 Ø¬Ù†ÙˆØ¨Ø§"],
      ["Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø¯Ø©","Ù…Ù†ØºÙˆÙ„ÙŠØ§","Ù„ÙŠØ¨ÙŠØ§","Ø¥ÙŠØ±Ø§Ù†"]
    ];

    // Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©: 0=A, 1=B, 2=C, 3=D
    const correctAnswers = [1,3,3,3,1,3,0,1,2,0,2,1,0,3,2,3,2,2,3,3,1,3,0,2,0];

    // Ø¹Ù†Ø§ØµØ± DOM
    const step1 = document.getElementById('step-1');
    const step2 = document.getElementById('step-2');
    const startBtn = document.getElementById('startBtn');
    const nameInput = document.getElementById('studentName');
    const agree = document.getElementById('agree');
    const form = document.getElementById('examForm');
    const submitBtn = document.getElementById('submitBtn');
    const resultBox = document.getElementById('resultBox');
    const leaderboardBox = document.getElementById('leaderboard');
    const board = document.getElementById('board');

    // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
    function renderQuestions() {
      form.innerHTML = '';
      questions.forEach((q, i) => {
        const wrap = document.createElement('div');
        wrap.className = 'question';
        const qEl = document.createElement('div');
        qEl.className = 'q';
        qEl.textContent = `${i + 1}- ${q}`;
        wrap.appendChild(qEl);

        options[i].forEach((opt, idx) => {
          const label = document.createElement('label');
          label.className = 'opt';
          label.innerHTML = `<input type="radio" name="q${i}" value="${idx}"> ${opt}`;
          wrap.appendChild(label);
        });

        form.appendChild(wrap);
      });
    }

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¯Ø±Ø¬Ø©
    function calcScore() {
      let score = 0;
      for (let i=0;i<questions.length;i++){
        const chosen = form.querySelector(`input[name="q${i}"]:checked`);
        if (!chosen) continue;
        if (Number(chosen.value) === correctAnswers[i]) score++;
      }
      return score;
    }

    // Ù„ÙˆØ­ Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚ÙŠÙ†
    function drawLeaderboard(list, myName) {
      board.innerHTML = '';
      list.forEach((row, idx) => {
        const li = document.createElement('li');
        if (row.name.trim() === myName.trim()) li.classList.add('me');
        li.innerHTML = `
          <div><strong>${idx+1}.</strong> ${row.name}</div>
          <div>Ø¯Ø±Ø¬Ø©: <strong>${row.score}</strong> â€” Ø²Ù…Ù†: ${row.duration ? (row.duration+'Ø«') : 'â€”'}</div>
        `;
        board.appendChild(li);
      });
    }

    // Ù…Ø¤Ø«Ø±Ø§Øª ğŸŠ
    function party() {
      confetti({ particleCount: 120, spread: 70, origin: { y: 0.6 } });
      setTimeout(()=>confetti({ particleCount: 80, spread: 90, origin: { y: 0.4 } }), 250);
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† (ØªØ³Ø¬ÙŠÙ„ ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„)
    startBtn.addEventListener('click', async () => {
      const name = nameInput.value.trim();
      if (!name) { alert('Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ.'); return; }
      if (!agree.checked) { alert('Ù„Ø§Ø¨Ø¯ Ù…Ù† Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©.'); return; }

      try {
        const r = await fetch(`${WEB_APP_URL}?action=start&name=${encodeURIComponent(name)}`);
        const j = await r.json();
        if (!j.ok && j.error) { alert('ØªØ¹Ø°Ø± Ø§Ù„Ø¨Ø¯Ø¡: ' + j.error); return; }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        renderQuestions();
        step1.classList.remove('active'); step1.style.display='none';
        step2.classList.add('active'); step2.style.display='block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } catch (e) {
        alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
      }
    });

    // ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
    submitBtn.addEventListener('click', async () => {
      const name = nameInput.value.trim();
      if (!name) { alert('Ø§Ù„Ø§Ø³Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.'); return; }

      // Ø§Ù„ØªØ­Ù‚Ù‚ Ø£Ù† ÙƒÙ„ Ø³Ø¤Ø§Ù„ Ù…Ø¬Ø§ÙˆØ¨
      for (let i=0;i<questions.length;i++){
        if (!form.querySelector(`input[name="q${i}"]:checked`)) {
          alert(`Ø¬Ø§ÙˆØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… ${i+1} Ù…Ù† ÙØ¶Ù„Ùƒ.`);
          return;
        }
      }

      const score = calcScore();

      try {
        const r = await fetch(`${WEB_APP_URL}?action=submit&name=${encodeURIComponent(name)}&score=${score}`);
        const j = await r.json();

        if (j.ok) {
          // Ø§Ù„Ù†ØªÙŠØ¬Ø©
          resultBox.style.display = 'block';
          if (j.status === 'already') {
            resultBox.innerHTML = `âš ï¸ ØªÙ… ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø³Ø§Ø¨Ù‚Ù‹Ø§.<br>Ø¯Ø±Ø¬ØªÙƒ: <strong>${j.score}</strong> / ${questions.length} â€” ØªØ±ØªÙŠØ¨Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: <strong>#${j.rank ?? 'â€”'}</strong>`;
          } else {
            resultBox.innerHTML = `ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ ${name}! Ø¯Ø±Ø¬ØªÙƒ <strong>${j.score}</strong> Ù…Ù† ${questions.length} â€” ØªØ±ØªÙŠØ¨Ùƒ: <strong>#${j.rank ?? 'â€”'}</strong>`;
            party();
          }

          // Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚ÙŠÙ†
          if (Array.isArray(j.leaderboard)) {
            drawLeaderboard(j.leaderboard, name);
            leaderboardBox.style.display = 'block';
          }
          // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø± Ø¨Ø¹Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…
          submitBtn.disabled = true;
          submitBtn.textContent = 'ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ… âœ…';
        } else {
          alert('ØªØ¹Ø°Ø± Ø§Ù„ØªØ³Ù„ÙŠÙ…: ' + (j.error || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'));
        }
      } catch (e) {
        alert('Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© ØªØ§Ù†ÙŠØ©.');
      }
    });
  </script>
</body>
</html>
